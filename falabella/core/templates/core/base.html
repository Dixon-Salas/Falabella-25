{% load static %}
<doctype html>
  <html>

  <head>
    <!-- FAVICON -->
    <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="description" content="Falabella Colombia">
    <title>{% block title %}{% endblock %}</title>

    <style>
      .dropdown-menu-wide {
        width: 300px;
        /* Ajusta este valor según tus necesidades */
        border: none;
        /* Eliminar borde */
        background: none;
        /* Eliminar fondo */
        box-shadow: none;
        /* Eliminar sombra */
      }

      .menu-hola {
        color: #040000;
        /* Color del texto */
        font-weight: bold;
        /* Opcional: para hacer el texto en negrita */
        padding: 5px;
        /* Opcional: para agregar un poco de espacio alrededor del texto */
        border-radius: 5px;
        /* Opcional: para redondear las esquinas */
      }

      .dropdown-toggle.no-arrow::after {
        display: none;
      }

      .bold-on-hover:hover {
        font-weight: bold;
      }

      .semi-bold-on-hover:hover {
        font-weight: 500;
      }

      .popover {
        max-width: 200px !important;
      }

      .popover-body {
        width: 200px !important;
        padding: 1rem !important;
      }

      .popover hr {
        margin: 0.5rem 0;
        border-top: 1px solid #dee2e6;
        opacity: 1;
        width: 80%;
      }

      .submenu {
        position: absolute;
        left: 250px;
        top: 0;
        height: 95vh;
        /* Reducir la altura a 80vh */
        width: 900px;
        background-color: white;
        border-left: 1px solid #dee2e6;
        padding: 1rem;
        display: none;
        z-index: 1050;
        overflow-y: auto;
        /* Cambiar de hidden a auto */
        padding-top: 60px;
        transition: all 0.2s ease-in-out;
        visibility: hidden;
        opacity: 0;
        border-radius: 0 15px 15px 0;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        /* Añadir sombra */
      }

      .submenu,
      .menu-item:hover .submenu {
        display: block;
        visibility: visible;
        opacity: 1;
        transition: opacity 0.3s;
      }

      .menu-item .submenu {
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .menu-item:hover .submenu,
      .submenu:hover {
        visibility: visible;
        opacity: 1;
        display: block;
      }

      /* Estilos para la barra de desplazamiento */
      .submenu::-webkit-scrollbar {
        width: 16px !important;
        display: block !important;
      }

      .submenu::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
        /* Añadir borde curvo */
        margin: 5px;
        margin-top: 1cm;
        /* Añadir margen superior de 1 cm */
      }

      .submenu::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
        /* Añadir borde curvo */
        min-height: 50px;
        border: 3px solid #f1f1f1;
      }

      .submenu::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      .submenu,
      .offcanvas-body {
        overflow-y: auto;
        scrollbar-width: thick;
        /* Cambiado a thick para una barra más ancha */
        scrollbar-color: #888 #f1f1f1;
      }

      /* Estilos específicos para la barra de desplazamiento */
      .submenu::-webkit-scrollbar,
      .offcanvas-body::-webkit-scrollbar {
        width: 20px !important;
        /* Aumentado significativamente */
        display: block !important;
        /* Fuerza la visualización de la barra */
      }

      .submenu::-webkit-scrollbar-track,
      .offcanvas-body::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
        /* Añadir borde curvo */
        margin: 5px;
        margin-top: 1cm;
        /* Añadir margen superior de 1 cm */
      }

      .submenu::-webkit-scrollbar-thumb,
      .offcanvas-body::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
        /* Añadir borde curvo */
        border: 3px solid #f1f1f1;
        /* Añade borde */
        min-height: 60px;
      }

      .submenu::-webkit-scrollbar-thumb:hover,
      .offcanvas-body::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* Asegura que el contenedor del submenu tenga suficiente contenido para scroll */
      .submenu ul,
      .offcanvas-body ul {
        min-height: 120vh;
        /* Mayor que la altura de la ventana */
        padding-bottom: 200px;
      }

      .menu-item:hover .submenu {
        display: block;
      }

      /* Asegurarse de que el contenido del submenu comience en la misma posición que el menú principal */
      .offcanvas-body {
        padding-top: 0;
        height: calc(100vh - 60px);
        /* Misma altura que el submenu */
        overflow-y: auto;
      }

      /* Comportamiento del hover */
      .menu-item:hover .submenu {
        display: block;
        opacity: 1;
        visibility: visible;
      }

      .submenu:hover {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateZ(0);
        /* Activar aceleración por hardware */
        will-change: transform;
        /* Optimizar rendimiento */
      }

      .menu-item.active .submenu {
        display: block;
      }

      /* Estilo específico para el submenu de Tecnología */
      #tecnologia-link+i+.submenu {
        border-radius: 0 15px 15px 0;
        /* Bordes curvos solo al lado derecho */
        border-left: 2px solid #dee2e6;
        /* Borde izquierdo más definido */
        box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
        /* Sombra suave en el lado derecho */
      }

      /* Ajustar el contenedor del submenu */
      #tecnologia-link+i+.submenu::-webkit-scrollbar-track {
        border-radius: 0 10px 10px 0;
        /* Borde curvo solo al lado derecho */
        margin: 5px;
        margin-top: 1cm;
        /* Añadir margen superior de 1 cm */
      }

      /* Ajustar la barra de desplazamiento */
      #tecnologia-link+i+.submenu::-webkit-scrollbar {
        border-radius: 0 10px 10px 0;
        /* Borde curvo solo al lado derecho */
        margin-right: 5px;
      }

      /* Ajustar el espaciado superior del contenido del submenu */
      .submenu .row {
        margin-top: 20px;
        /* Espacio superior */
        padding-top: 20px;
        /* Padding adicional */
      }

      /* Si necesitas ajustar específicamente las columnas */
      .submenu .col-md-3 {
        margin-top: 15px;
        /* Espacio superior para cada columna */
      }

      /* Ajustar el título del submenu */
      .submenu h6 {
        margin-top: 15px;
        /* Espacio superior para los títulos */
      }

      /* Cambiar el cursor a una mano para "Hola, Inicia sesión" y su submenú, "Mis compras", "Rebajas Vestuario", "Menú" y su submenú */
      #loginArea,
      #loginArea a,
      #misCompras,
      #misCompras a,
      #rebajas-link,
      .menu-item,
      .submenu,
      button[data-bs-toggle="offcanvas"] {
        cursor: pointer;
      }

      .no-underline {
        text-decoration: none !important;
        color: inherit !important;
      }

      a {
        text-decoration: none;
        color: inherit;
      }

      /* Estilos para el modal de inicio de sesión */
      #loginModal .modal-header {
        border-bottom: 1px solid #dee2e6;
        /* Reduce el grosor de la línea */
      }

      /* Ajustar el padding del header del modal */
      #loginModal .modal-header {
        padding-bottom: 0.5rem;
        /* Reduce el espacio debajo del logo */
      }

      /* Ajustar el margen del título del modal */
      #loginModal .modal-title {
        margin-bottom: 0;
      }

      /* Estilos para el input del login */
      #loginModal .form-control {
        border-top: none;
        border-left: none;
        border-right: none;
        border-radius: 0;
        border-bottom: 1px solid #000; /* Cambiamos el color a negro */
        padding-left: 0;
      }

      #loginModal .form-control:focus {
        box-shadow: none;
        border-bottom: 2px solid #000; /* Mantenemos el negro en el focus */
      }

      /* Ajustar la posición vertical del modal */
      #loginModal .modal-dialog {
        margin-top: 150px; /* Aumenta este valor para bajar más el modal */
      }
      

      /* Opcional: agregar una transición suave */
      #loginModal.fade .modal-dialog {
        transition: transform .3s ease-out, margin-top .3s ease-out;
      }

      /* Estilos para el formulario de registro en línea */
      .integrated-register {
        position: relative;
        background-color: #f8f9fa;
        border-top: 1px solid #dee2e6;
        border-bottom: 1px solid #dee2e6;
        margin-top: 1rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .integrated-register .card {
        transition: transform 0.3s;
      }

      .integrated-register .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
      }

      .integrated-register .form-control:focus {
        border-color: #000;
        box-shadow: none;
      }

      .integrated-register .btn-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        z-index: 10;
      }

      .popover hr {
        margin: 0.5rem auto;
        border-top: 1px solid #dee2e6;
        opacity: 1;
        width: 50%; /* Reducir el ancho al 50% */
      }

      .form-check-input {
        width: 1.2em;
        height: 1.2em;
        margin-top: 0.25em;
        border: 2px solid #000;
      }

      .form-check-input:checked {
        background-color: #000;
        border-color: #000;
      }

      .form-check-label {
        padding-left: 0.5em;
      }

      /* Agregar este estilo específico para los requisitos de contraseña */
      .password-requirements {
          font-size: 10px;  /* Reducir solo el tamaño de fuente */
          color: #6c757d;   /* Mantener el color gris */
          margin-bottom: 2px; /* Mantener el espaciado */
      }
    </style>

  </head>

  <body>

    <!-- Main container -->
    <div class="container-fluid">

      <!-- Navbar Homecenter / Linio -->
      <nav class="flex justify-between items-center border-b border-gray-200">
        <div class="btn btn-group">
          <a href="#" aria-current="page" class="py-3  object-contain px-2">
            <img src="{% static 'img/falIconButton.png' %}" alt="Falabella Icon" width="90" height="15">
          </a>
          <a href="https://homecenter.falabella.com.co/homecenter-co" class="py-3 object-contain px-2">
            <img src="{% static 'img/homIconButton.png' %}" alt="Homecenter Icon" width="115" height="10">
          </a>
          <a href="https://linio.falabella.com.co/linio-co" class="py-1 object-contain px-2">
            <img src="{% static 'img/linIconButton.png' %}" alt="Linio Icon" width="50" height="30">
          </a>
        </div>
      </nav>

      <!-- Main Navbar -->
      <nav
        class="navbar border-bottom border-gray-200 d-flex align-items-center justify-content-between px-3 py-2 bg-gray-50">
        <!-- Logo + Menu -->
        <div class="d-flex align-items-center">
          <!-- Logo -->
          <div class="me-3">
            <img src="{% static 'img/falLogo.png' %}" alt="Falabella Icon" width="150" height="50">
          </div>
          <!-- Offcanvas Menu Button -->
          <button class="d-flex align-items-center justify-content-center" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasMenu" aria-controls="offcanvasMenu">
            <i class="bi bi-list"></i> <strong class="fs-5">Menú</strong>
          </button>
          <!---
        <button class="d-flex align-items-center justify-content-center" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu" aria-controls="offcanvasMenu">
          <i class="bi bi-list fs-1"></i> <strong class="fs-5">Menú</strong>
        </button>
        -->
          <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel"
            style="width: 250px;">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasMenuLabel">¡Hola!</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="list-unstyled">
                <li class="d-flex justify-content-between align-items-center menu-item">
                  <span href="#" id="rebajas-link">Rebajas Vestuario</span>
                  <i class="bi bi-chevron-right"></i>
                  <div class="submenu">
                    <div class="row g-2"> <!-- Añadimos la clase g-2 para reducir el espaciado -->
                      <!-- Columna Ropa Mujer -->
                      <div class="col-md-3 px-2"> <!-- Reducimos el padding horizontal -->
                        <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Rebajas Ropa Mujer</a></span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Blusas</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisetas</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Sacos y Sweaters</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Vestidos</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Jeans</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalones</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Cardigans</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Chalecos</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pijamas</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Brassieres</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Calzones</a></li>
                          <li class="mb-4" style="width: 150px;"></li>
                          <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Rebajas Deportiva Mujer</a></span>
                          </h6>
                          <ul class="list-unstyled">
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisetas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Tops</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Short</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Leggings</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Sacos y Hoodies</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Chaquetas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalones</a></li>
                          </ul>
                      </div>
                      <!-- Nueva Columna Ropa Hombre -->
                      <div class="col-md-3 px-2">
                        <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Ropa Hombre</a></span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisas</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Poleras</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Chaquetas</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Jeans</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalones</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Polerones</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Trajes</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Ropa Interior</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Calcetines</a></li>
                          <li class="mb-4" style="width: 150px;"></li>
                          <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Ropa Deportiva Hombre</a></span></h6>
                          <ul class="list-unstyled">
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisetas Futbool</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisetas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalonetas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalones</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Chaquetas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Sacos y Hoodies</a></li>
                          </ul>
                      </div>
                      <!-- Nueva Columna Ropa Hombre -->
                      <div class="col-md-3 px-2">
                        <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Ropa Niñas</a></span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisas</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Poleras</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Chaquetas</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Jeans</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalones</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Polerones</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Trajes</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Ropa Interior</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover">Calcetines</a></li>
                          <li class="mb-6" style="width: 150px;"></li>
                          <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Ropa Niños</a></span></h6>
                          <ul class="list-unstyled">
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisetas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalones</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Sacos y Sweaters</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pijamas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Ropa interior</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Chaquetas</a></li>
                            <li class="mb-2"><a href="/" class="semi-bold-on-hover">Bermudas</a></li>
                            <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Ropa Bebes Niñas</a></span></h6>
                            <ul class="list-unstyled"> <!-- Abre una nueva lista aquí si es necesario -->
                              <li class="mb-2"><a href="/" class="semi-bold-on-hover">Camisetas</a></li>
                              <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pantalones</a></li>
                              <li class="mb-2"><a href="/" class="semi-bold-on-hover">Sacos y Sweaters</a></li>
                              <li class="mb-2"><a href="/" class="semi-bold-on-hover">Pijamas</a></li>
                              <li class="mb-2"><a href="/" class="semi-bold-on-hover">Ropa interior</a></li>
                              <li class="mb-2"><a href="/" class="semi-bold-on-hover">Chaquetas</a></li>
                              <li class="mb-2"><a href="/" class="semi-bold-on-hover">Bermudas</a></li>
                            </ul>
                      </div>
                      <!-- Nueva Columna Ropa bebe niños -->
                      <div class="col-md-3 px-2">
                        <h6 class="mb-2"><span class="bold-on-hover"><a href="/">Ropa Bebes Niños</a></span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover no-underline">Packs</a></li>
                          <li class="mb-2"><a href="/" class="semi-bold-on-hover no-underline">Conjuntos</a></li>
                        </ul>
                      </div>
                      <!--Tecnologia-->
                <li class="d-flex justify-content-between align-items-center menu-item">
                  <span href="#" id="rebajas-link">Tecnología</span>
                  <i class="bi bi-chevron-right"></i>
                  <div class="submenu">
                    <div class="row g-2"> <!-- Añadimos la clase g-2 para reducir el espaciado -->
                      <!-- Columna Ropa Computación -->
                      <div class="col-md-3 px-2"> <!-- Reducimos el padding horizontal -->
                        <h6 class="mb-2"><span class="bold-on-hover">Computación</span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Portátiles</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Inteligencia
                              Artificial</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Tablets</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Impresoras</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Portátiles gamer</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Accesorios
                              Computación</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Monitores</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Pc de escritorio</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Conectividad</a></li>
                          <li class="mb-4" style="width: 150px;"></li>

                          <h6 class="mb-2"><span class="bold-on-hover">Audio</span></h6>
                          <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Audifonos</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Barras de sonido</a>
                            </li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Equipos de sonido y
                                karaoke</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Accesorios audio</a>
                            </li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Parlantes</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Audio profesional y
                                dj</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Instrumentos
                                musicales</a></li>
                          </ul>
                      </div>
                      <!-- Nueva Columna Ropa Hombre -->
                      <div class="col-md-3 px-2">
                        <h6 class="mb-2"><span class="bold-on-hover">Tv y video</span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Televisores</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">TVs de 42" o menos</a>
                          </li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">TVs de 43"-49"</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">TVs de 50"-58"</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">TVs de 60"-65"</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">TVs superiores a 70"</a>
                          </li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Proyectores</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Accesorios TV</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Soportes</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Streaming</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Zona gamer</a></li>
                          <ul class="list-unstyled">

                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Portatiles gamer</a>
                            </li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Monitores gamer</a>
                            </li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Accesorios gamer</a>
                            </li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Audifonos gamer</a>
                            </li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Sillas gamer</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Lentes VR</a></li>
                          </ul>
                      </div>
                      <!-- Nueva Columna Ropa Hombre -->
                      <div class="col-md-3 px-2">
                        <h6 class="mb-2"><span class="bold-on-hover">Consolas</span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                              style="text-decoration: none; color: inherit;">Playstation</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                              style="text-decoration: none; color: inherit;">Nintendo</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                              style="text-decoration: none; color: inherit;">Xbox</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                              style="text-decoration: none; color: inherit;">Videojuegos</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                              style="text-decoration: none; color: inherit;">Accesorios</a></li>
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                              style="text-decoration: none; color: inherit;">Consolas retro</a></li>
                          <li class="mb-6" style="width: 150px;"></li>
                          <h6 class="mb-2"><span class="bold-on-hover">Smartwatch y accesorios</span></h6>
                          <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Smartwatch</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Smartband</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Accesorios</a></li>

                            <h6 class="mb-2"><span class="bold-on-hover">Cámaras y drones</span></h6>
                            <ul class="list-unstyled">
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                  style="text-decoration: none; color: inherit;">Cámaras deportivas</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                  style="text-decoration: none; color: inherit;">Cámaras instantaneas</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                  style="text-decoration: none; color: inherit;">Cámaras profesionales</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                  style="text-decoration: none; color: inherit;">Cámaras semiprofesionales</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                  style="text-decoration: none; color: inherit;">Accesorios fotografía</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                  style="text-decoration: none; color: inherit;">Drones</a></li>
                            </ul>
                          </ul>
                      </div>
                      <!-- Nueva Columna Ropa bebe niños -->
                      <div class="col-md-3 px-2">
                        <h6 class="mb-2"><span class="bold-on-hover">Patinetas eléctricas</span></h6>
                        <ul class="list-unstyled">
                          <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                              style="text-decoration: none; color: inherit;">ver todo</a></li>
                          <div style="margin-bottom: 20px;"></div>
                          <h6 class="mb-2"><span class="bold-on-hover">Smart Home</span></h6>
                          <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Asistentes de voz</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Aspiradoras robots</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Iluminación inteligente</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Cámaras inteligentes</a></li>
                            <li class="mb-2"><a href="#" class="semi-bold-on-hover"
                                style="text-decoration: none; color: inherit;">Routers y conectividad</a></li>
                            <h6 class="mb-2"><span class="bold-on-hover">Marcas Destacadas</span></h6>
                            <ul class="list-unstyled">
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Apple</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Samsung</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Xiaomi</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">LG</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Sony</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Bosse</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">HP</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Lenovo</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">Asus</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline">JVC</a></li>
                              <li class="mb-2"><a href="#" class="semi-bold-on-hover no-underline"></a></li>
                            </ul>
                      </div>



                    </div>
                  </div>
                </li>


                <li class="mb-4" style="width: 150px;"></li>
                <hr class="my-4">
                <li><a href="#" style="text-decoration: none; color: black; font-size: x-small;"><small><strong>TIENDAS
                        OFICIALES</strong></small></a></li>
                <li class="mb-4" style="width: 100px;"></li>
                <li><a href="#"><img src="{% static 'img/homIconButton.png' %}" alt="Homecenter Icon" width="100"
                      height="30"></a></li>
                <li class="mb-4" style="width: 100px;"></li>

                <hr class="my-4">
                <li><a href="#" style="text-decoration: none;"></a>Vende en falabella.com</a></li>
                <hr class="my-4">
                <li><a href="#" id="guias-compras-link" style="text-decoration: none;"></a>Guias de compras</a></li>
                <li class="mb-4" style="width: 100px;"></li>
                <li><a href="#" id="horario-tiendas-link" style="text-decoration: none;"><a>Horario de tiendas</a></a>
                </li>
                <li class="mb-4" style="width: 100px; font-size: larger;"></li>
                <hr class="my-4">
                <img src="{% static 'img/falIconButton.png' %}" alt="falIconButton" width="115" height="10">

              </ul>
            </div>
          </div>
        </div>
        <!-- Search bar -->
        <div class="flex-grow-1 mx-4">
          <div class="input-group">
            <input class="form-control rounded-pill py-2 bg-transparent" type="search"
              placeholder="Buscar en falabella.com" aria-label="Search">
            <span class="position-absolute top-50 end-0 translate-middle-y me-2 bg-secondary rounded-circle"
              style="width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
              <i class="bi bi-search text-white"></i>
            </span>
          </div>
        </div>
        <!-- Links -->
        <nav class="navbar p-2">
          <div class="container-fluid d-flex align-items-center justify-content-between">
            <!-- Login -->
            <div class="d-flex flex-column align-items-start" id="loginArea">
              <strong class="text-dark mb-0 fs-5">Hola,</strong> <!-- Aumentar el tamaño del texto -->
              <div class="d-flex align-items-center">
                <strong class="text-dark fs-5 semi-bold-on-hover">Inicia sesión</strong>
                <!-- Aumentar el tamaño del texto -->
                <i class="bi bi-chevron-down ms-1 fs-5" id="chevronIcon"></i> <!-- Aumentar el tamaño del ícono -->
              </div>
            </div>
            <!-- Divider -->
            <div class="vr mx-3"></div>
            <!-- Mis compras -->
            <div class="d-flex align-items-center" id="misCompras">
              <div class="d-flex flex-column" style="line-height: 1;">
                <strong class="text-dark">Mis</strong>
                <strong class="text-dark fw-bold">compras</strong>
              </div>
            </div>
            <!-- Divider -->
            <div class="vr mx-3"></div>
            <!-- Liked -->
            <a href="#">
              <i class="bi bi-heart text-dark fs-4"></i>
            </a>
            <!-- Divider -->
            <div class="vr mx-3"></div>
            <!-- Cart -->
            <div class="position-relative me-3">
              <a href="#" class="text-decoration-none">
                <i class="bi bi-cart3 text-dark fs-4"></i>
              </a>
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-dark">
                0
              </span>
            </div>
          </div>
        </nav>
      </nav>

      <!-- Agregar después del nav principal -->
      <div id="inlineRegisterForm" class="integrated-register" style="display: none;">
        <div class="container py-4">
          <div class="row justify-content-center">
            <div class="col-md-12">
              <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                  <div class="row">
                    <!-- Columna del formulario - eliminar la clase border-end -->
                    <div class="col-md-7">
                      <!-- Título y subtítulo -->
                      <h4 class="text-label mb-2">Inicia sesión o regístrate para comprar</h4>
                      <p class="text-muted mb-4" style="font-size: 14px;">Ingresa tus datos personales y disfruta de una experiencia de compra más rápida.</p>
                      
                      <form id="registrationForm">
                        {% csrf_token %}
                        <div class="mb-3">
                          <label class="form-label">Correo</label>
                          <div class="position-relative col-md-10">
                            <input type="text" class="form-control border-0 border-bottom rounded-0"
                                   placeholder="Ingresa un correo" 
                                   style="box-shadow: none; background: transparent;padding-left: 0px;" required>
                          </div>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Nombre</label>
                          <div class="position-relative col-md-10">
                            <input type="text" class="form-control border-0 border-bottom rounded-0"
                                   placeholder="Ingresa un nombre" 
                                   style="box-shadow: none; background: transparent;padding-left: 0px;" required>
                          </div>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Apellidos</label>
                          <div class="position-relative col-md-10">
                            <input type="text" class="form-control border-0 border-bottom rounded-0"
                                   placeholder="Ingresa apellidos" 
                                   style="box-shadow: none; background: transparent;padding-left: 0px;" required>
                          </div>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Tipo de documento</label>
                          <div class="position-relative col-md-10">
                            <strong class="position-absolute" style="top: 50%; transform: translateY(-50%); left: 0px;">CC</strong>
                            <input type="text"class="form-control border-0 border-bottom rounded-0"
                                   placeholder="Ingresa una cedula"style="box-shadow: none; background: transparent; padding-left: 25px;"required>
                          </div>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Celular</label>
                          <div class="position-relative col-md-10"> <!-- Agregamos col-md-6 para hacerlo más corto -->
                            <strong class="position-absolute" style="top: 50%; transform: translateY(-50%); left: 0px;">+57</strong>
                            <input type="celular" class="form-control border-0 border-bottom rounded-0"
                                   placeholder="Ingresa un celular" 
                                   style="box-shadow: none; background: transparent; padding-left: 40px;" required>
                          </div>                        

                        </div>
                        <!-- Agregar después del campo de celular -->
                        <div class="mb-3">
                          <label class="form-label">Contraseña</label>
                          <div class="position-relative col-md-10">
                            <input type="password" class="form-control border-0 border-bottom rounded-0"
                                   placeholder="Ingresa una contraseña" 
                                   style="box-shadow: none; background: transparent; padding-left: 0px;" required>
                            <button type="button" class="btn position-absolute end-0 top-50 translate-middle-y" 
                                    onclick="togglePassword('registerPassword')" 
                                    style="background: none; border: none;">
                              <i class="bi bi-eye-slash" id="toggleRegisterPassword"></i>
                            </button>
                          </div>

                          <!-- Requisitos de contraseña -->
                          <div class="mt-2">
                            <small class="text-muted">
                              <div class="container p-0">
                                <div class="row g-2">
                                  <!-- Columna 1 -->
                                  <div class="col-4">
                                    <div style="font-size: 10px; color: #000000; font-weight: bold;">• Mín. 8 caracteres</div>
                                    <div style="font-size: 10px; color: #000000; font-weight: bold;">• 1 número</div>
                                  </div>
                                  <!-- Columna 2 -->
                                  <div class="col-4">
                                    <div style="font-size: 10px; color: #000000; font-weight: bold;">• 1 mayúscula</div>
                                    <div style="font-size: 10px; color: #000000; font-weight: bold;">• 1 minúscula</div>
                                  </div>
                                  <!-- Columna 3 -->
                                  <div class="col-4">
                                    <div style="font-size: 10px; color: #000000; font-weight: bold;">• Sin espacio</div>
                                    <div style="font-size: 10px; color: #000000; font-weight: bold;">• Sin usar '\¡¿"ºª·`´çñÑ</div>
                                  </div>
                                </div>
                              </div>
                            </small>
                          </div>
                        </div>
                        <div class="mb-3"> 
                                             
                          
                          
                          <div class="position-relative">
                            <div class="dropdown">

                          </div>
                        </div>
                      </div

                      <!-- Separador -->
                      
                      
                        <div style="margin-bottom: 20px;"></div>
                        <div class="mb-3">
                          <!-- Primero el texto de CMR Puntos -->
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="cmrPuntosCheck" required>
                            <label class="form-check-label" for="cmrPuntosCheck" style="font-size: 14px;">
                              Quiero acumular CMR Puntos en mis compras según 
                              <u><a href="#" data-bs-toggle="modal" data-bs-target="#reglamentoModal">el reglamento del programa</a></u>
                              y autorizo el<br>
                              <u><a href="#" data-bs-toggle="modal" data-bs-target="#tratamientoModal">tratamiento de mis datos personales</a></u>
                            </label>
                          </div>
                          
                          <!-- Luego el texto de términos y condiciones -->
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="terminosCheck" required>
                            <label class="form-check-label" for="terminosCheck" style="font-size: 14px;">
                              Acepto los términos y condiciones de falabella.com y autorizo el tratamiento de mis datos personales.
                            </label>
                          </div>
                        </div>

                        <!-- El botón de crear cuenta sin color -->
                        <button type="submit" class="btn rounded-pill w-50 mx-auto d-block border-dark" 
                                style="font-size: 14px; padding: 8px 20px; background-color: transparent; color: #000;">
                          Registrate
                        </button>

                        <!-- Agregar el texto de ya tienes cuenta -->
                        <div class="text-center mt-3">
                          <p class="text-muted mb-2">
                            ¿Ya tienes una cuenta? 
                            <a href="#" class="text-dark text-decoration-underline" onclick="showLoginForm()">inicia sesión</a>
                          </p>
                        </div>
                      </form>
                    </div>
                    
                    <!-- Columna de beneficios -->
                    <div class="col-md-5">
                      <div class="p-4">
                        <!-- Primera sección de beneficios -->
                        <h5 class="mb-4">Beneficios falabella.com</h5>
                        <div class="row">
                          <!-- Columna izquierda -->
                          <div class="col-6">
                            <ul class="list-unstyled">
                              <li class="mb-3 text-nowrap"> <!-- Agregamos text-nowrap -->
                                <i class="bi bi-clock-history text-success me-2"></i>
                                <span style="font-size: 14px;">Recibir notificaciones en tiempo real</span> <!-- Agregamos span con tamaño de fuente -->
                              </li>
                              <li class="mb-3">
                                <i class="bi bi-heart text-success me-2"></i>
                                Revisar boletas online
                              </li>
                              <li class="mb-3 text-nowrap"> <!-- Agregamos text-nowrap -->
                                <i class="bi bi-heart text-success me-2"></i>
                                <span style="font-size: 14px;">Guardar medios de pago y direcciones favoritas</span>
                              </li>
                              <li class="mb-3 text-nowrap">
                                <i class="bi bi-heart text-success me-2"></i>
                                <span style="font-size: 14px;">Ser parte de CMR puntos, el mejor programa de beneficios</span>
                              </li>
                            </ul>
                          </div>
                          
                          
                          </div>
                        </div>
                        
                        <!-- Separador -->
                        <div style="width: 90%;">
                          <hr style="width: 100%; margin-left: 0; opacity: 1; border-top: 1px solid #dee2e6;">
                        </div>
                        
                        <!-- Segunda sección de beneficios -->
                        <h5 class="mb-4">Beneficios CMR Puntos</h5>
                        <ul class="list-unstyled">
                          <li class="mb-3">
                            <i class="bi bi-piggy-bank text-success me-2"></i>
                            Canje de productos, experiencias, viajes y Gift Cards
                          </li>
                          <li class="mb-3">
                            <i class="bi bi-gift text-success me-2"></i>
                            Promociones especiales, cupones de descuento y más
                          </li>
                        </ul>
                      </div>
                    </div>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', function () {
          var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
          var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
         });

          var loginArea = document.getElementById('loginArea');
          var chevronIcon = document.getElementById('chevronIcon');
          var popover = new bootstrap.Popover(chevronIcon, {
            trigger: 'manual',
            placement: 'bottom',
            html: true,
            content: `
            <div class="popover-body text-start">
              <ul class="list-unstyled m-0">
                <li class="mb-3">
                  <a href="#" class="semi-bold-on-hover no-underline" id="loginLink">
                    Inicia sesión
                  </a>
                </li>
                <li class="mb-3">
                  <a href="#" class="semi-bold-on-hover no-underline" id="registerLink">
                    Regístrate
                  </a>
                </li>
                <li class="mb-3">
                  <a href="#" class="semi-bold-on-hover no-underline" id="myAccountLink">
                    Mi cuenta
                  </a>
                </li>
                <hr class="my-3">
                <li class="mb-3"><a href="/" class="semi-bold-on-hover no-underline">CMR Puntos</a></li>
              </ul>
            </div>
          `
          });

          // Agregar evento para manejar el clic en el enlace de inicio de sesión
          document.addEventListener('click', function (event) {
            const loginLink = event.target.closest('#loginLink');
            if (loginLink) {
              event.preventDefault();

              // Ocultar el popover
              popover.hide();

              // Mostrar el modal de inicio de sesión
              const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
              loginModal.show();
            }
          });

          // Manejar el envío del formulario del modal
          document.querySelector('#loginModal form').addEventListener('submit', function (event) {
            event.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // Remover mensaje de error anterior si existe
            const existingError = document.querySelector('.error-message');
            if (existingError) {
              existingError.remove();
            }

            // Simular verificación de credenciales (reemplazar con tu lógica real)
            fetch('/login/', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
              },
              body: JSON.stringify({ email, password })
            })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                window.location.reload();
              } else {
                // Crear y mostrar mensaje de error
                const errorDiv = document.createElement('div');
                errorDiv.className = 'alert alert-danger mt-3 error-message';
                errorDiv.style.fontSize = '14px';
                errorDiv.innerHTML = 'Correo electrónico o contraseña incorrecta. Por favor, vuelve a intentarlo nuevamente.';
                
                // Insertar el mensaje después del botón de ingresar
                const submitButton = document.querySelector('#loginModal button[type="submit"]');
                submitButton.insertAdjacentElement('afterend', errorDiv);
              }
            })
            .catch(error => {
              // Mostrar el mismo mensaje de error en caso de error de red
              const errorDiv = document.createElement('div');
              errorDiv.className = 'alert alert-danger mt-3 error-message';
              errorDiv.style.fontSize = '14px';
              errorDiv.innerHTML = 'Correo electrónico o contraseña incorrecta. Por favor, vuelve a intentarlo nuevamente.';
              
              const submitButton = document.querySelector('#loginModal button[type="submit"]');
              submitButton.insertAdjacentElement('afterend', errorDiv);
            });
          });

          // Agregar evento para manejar el clic en el enlace de registro
          document.addEventListener('click', function (event) {
            const registerLink = event.target.closest('#registerLink');
            if (registerLink) {
              event.preventDefault();

              // Ocultar el popover
              popover.hide();

              // En lugar de mostrar el modal, mostramos el contenedor inline
              document.getElementById('inlineRegisterForm').style.display = 'block';
              
              // Scroll to the registration form
              document.getElementById('inlineRegisterForm').scrollIntoView({behavior: 'smooth'});
            }
          });

          // Manejar el envío del formulario de registro
          document.getElementById('registerForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            // Validar que las contraseñas coincidan
            if (password !== confirmPassword) {
              alert('Las contraseñas no coinciden');
              return;
            }

            // Enviar datos al servidor
            fetch('/register/', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
              },
              body: JSON.stringify({
                name: name,
                email: email,
                password: password
              })
            })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                window.location.reload();
              } else {
                alert(data.message || 'Error al registrar usuario');
              }
            })
            .catch(error => {
              console.error('Error:', error);
              alert('Error al registrar usuario');
            });
          });

          // Agregar el event listener para Mi cuenta
          document.addEventListener('click', function(event) {
            const myAccountLink = event.target.closest('#myAccountLink');
            if (myAccountLink) {
              event.preventDefault();
              
              // Ocultar el popover
              popover.hide();
              
              // Mostrar el modal de inicio de sesión
              const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
              loginModal.show();
            }
          });

          loginArea.addEventListener('mouseover', function () {
            popover.show();
          });

          loginArea.addEventListener('mouseleave', function () {
            setTimeout(function () {
              if (!loginArea.matches(':hover') && !document.querySelector('.popover:hover')) {
                popover.hide();
              }
            }, 300);
          });

          document.addEventListener('click', function (event) {
            if (!loginArea.contains(event.target) && !document.querySelector('.popover').contains(event.target)) {
              popover.hide();
            }
          });
        });

        document.addEventListener('DOMContentLoaded', function () {
          const menuItems = document.querySelectorAll('.menu-item');
          let activeSubmenu = null;

          menuItems.forEach(item => {
            const submenu = item.querySelector('.submenu');

            if (submenu) {
              item.addEventListener('mouseenter', () => {
                // Ocultar submenú anterior si existe y es diferente
                if (activeSubmenu && activeSubmenu !== submenu) {
                  activeSubmenu.style.display = 'none';
                }
                // Calcular posición y mostrar submenú
                const offcanvasBody = document.querySelector('.offcanvas-body');
                const bodyTop = offcanvasBody.getBoundingClientRect().top;
                submenu.style.top = `${bodyTop}px`;
                submenu.style.display = 'block';
                activeSubmenu = submenu;
              });

              // Mantener el submenú visible al hacer hover sobre él
              submenu.addEventListener('mouseenter', () => {
                submenu.style.display = 'block';
              });

              // Mantener el submenú visible al hacer hover sobre el menú principal
              item.addEventListener('mouseleave', () => {
                setTimeout(() => {
                  if (!submenu.matches(':hover')) {
                    submenu.style.display = 'none';
                  }
                }, 300);
              });

              submenu.addEventListener('mouseleave', () => {
                setTimeout(() => {
                  if (!item.matches(':hover')) {
                    submenu.style.display = 'none';
                  }
                }, 300);
              });
            }
          });
        });

        function togglePassword(id) {
          const passwordInput = document.getElementById(id);
          const toggleIcon = document.getElementById('togglePassword');
          if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            toggleIcon.classList.remove('bi-eye-slash');
            toggleIcon.classList.add('bi-eye');
          } else {
            passwordInput.type = 'password';
            toggleIcon.classList.remove('bi-eye');
            toggleIcon.classList.add('bi-eye-slash');
          }
        }

        function closeInlineRegister() {
          document.getElementById('inlineRegisterForm').style.display = 'none';
          localStorage.setItem('registerFormVisible', 'false');
        }
      </script>

      <script>
        function togglePassword(inputId) {
          const passwordInput = document.getElementById(inputId);
          const toggleIcon = document.getElementById('togglePassword');
          
          if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            toggleIcon.className = 'bi bi-eye';
          } else {
            passwordInput.type = 'password';
            toggleIcon.className = 'bi bi-eye-slash';
          }
        }
      </script>

      <script>
        document.addEventListener('click', function(event) {
          const registerLinkFromLogin = event.target.closest('#registerLinkFromLogin');
          if (registerLinkFromLogin) {
            event.preventDefault();
            
            // Cerrar el modal de login
            const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            loginModal.hide();
            
            // Mostrar el formulario de registro en línea en lugar del modal
            document.getElementById('inlineRegisterForm').style.display = 'block';
            document.getElementById('inlineRegisterForm').scrollIntoView({behavior: 'smooth'});
          }
        });
      </script>

      <script>
        document.querySelector('#loginModal form').addEventListener('submit', function(event) {
          event.preventDefault();
          
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;
          
          // Simular validación (esto es solo para demostración)
          if (email && password) {
            // Crear el mensaje de error
            const errorDiv = document.createElement('div');
            errorDiv.className = 'alert alert-danger mt-3';
            errorDiv.style.fontSize = '14px';
            errorDiv.style.borderRadius = '8px';
            errorDiv.innerHTML = 'Correo electrónico o contraseña incorrecta. Por favor, vuelve a intentarlo nuevamente.';
            
            // Remover mensaje de error anterior si existe
            const existingError = document.querySelector('.alert-danger');
            if (existingError) {
              existingError.remove();
            }
            
            // Insertar el mensaje después del botón
            const form = document.querySelector('#loginModal form');
            form.appendChild(errorDiv);
          }
        });
      </script>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const loginForm = document.querySelector('#loginModal form');
          
          loginForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Remover mensaje de error anterior si existe
            const existingError = document.querySelector('.alert-danger');
            if (existingError) {
              existingError.remove();
            }
            
            // Crear el mensaje de error
            const errorDiv = document.createElement('div');
            errorDiv.className = 'alert alert-danger mt-3';
            errorDiv.style.fontSize = '14px';
            errorDiv.style.borderRadius = '8px';
            errorDiv.innerHTML = 'Correo electrónico o contraseña incorrecta. Por favor, vuelve a intentarlo nuevamente.';
            
            // Insertar el mensaje después del título "Inicia sesión para comprar"
            const title = loginForm.querySelector('h4');
            title.insertAdjacentElement('afterend', errorDiv);

            // Limpiar los campos del formulario
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
            
            // Restablecer el ícono de mostrar/ocultar contraseña
            const toggleIcon = document.getElementById('togglePassword');
            toggleIcon.className = 'bi bi-eye-slash';
            
            // Asegurar que el campo de contraseña esté en modo oculto
            document.getElementById('password').type = 'password';
          });
        });
      </script>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const loginForm = document.querySelector('#loginModal form');
          
          loginForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Remover mensaje de error anterior si existe
            const existingError = document.querySelector('.alert-danger');
            if (existingError) {
              existingError.remove();
            }
            
            // Crear el mensaje de error
            const errorDiv = document.createElement('div');
            errorDiv.className = 'alert alert-danger mt-3';
            errorDiv.style.fontSize = '14px';
            errorDiv.style.borderRadius = '8px';
            errorDiv.innerHTML = 'Correo electrónico o contraseña incorrecta. Por favor, vuelve a intentarlo nuevamente.';
            
            // Insertar el mensaje después del título "Inicia sesión para comprar"
            const title = loginForm.querySelector('h4');
            title.insertAdjacentElement('afterend', errorDiv);

            // Limpiar los campos del formulario
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
            
            // Restablecer el ícono de mostrar/ocultar contraseña
            const toggleIcon = document.getElementById('togglePassword');
            toggleIcon.className = 'bi bi-eye-slash';
            
            // Asegurar que el campo de contraseña esté en modo oculto
            document.getElementById('password').type = 'password';
          });
        });
      </script>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const loginModal = document.getElementById('loginModal');
          const loginForm = document.querySelector('#loginModal form');
          
          // Limpiar el error cuando se cierra el modal
          loginModal.addEventListener('hidden.bs.modal', function() {
            // Remover mensaje de error si existe
            const existingError = document.querySelector('.alert-danger');
            if (existingError) {
              existingError.remove();
            }
            
            // Limpiar los campos del formulario
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
            
            // Restablecer el ícono de mostrar/ocultar contraseña
            const toggleIcon = document.getElementById('togglePassword');
            toggleIcon.className = 'bi bi-eye-slash';
            
            // Asegurar que el campo de contraseña esté en modo oculto
            document.getElementById('password').type = 'password';
          });
          
          // Resto del código del formulario...
        });
      </script>

      <!-- Modal de inicio de sesión -->
      <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="loginModalLabel">
                <img src="{% static 'img/falIconButton.png' %}" alt="Falabella Icon" height="30">
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form>
                <h4 class="text-label mb-4">Inicia sesión para comprar</h4>
                <div class="mb-3" style="margin-top: -15px;">
                  <label for="email" class="form-label">Correo electrónico</label>
                  <input type="email" class="form-control border-0 border-bottom rounded-0" id="email" 
                         placeholder="nombre@ejemplo.com" style="box-shadow: none; background: transparent;" required>
                  
                  <label for="password" class="form-label">Contraseña</label>
                  <div class="position-relative">
                    <input type="password" class="form-control border-0 border-bottom rounded-0" id="password" 
                           placeholder="Ingresa tu contraseña" style="box-shadow: none; background: transparent;" required>
                    <button type="button" class="btn position-absolute end-0 top-50 translate-middle-y" 
                            onclick="togglePassword('password')" style="background: none; border: none;">
                      <i class="bi bi-eye-slash" id="togglePassword"></i>
                    </button>
                  </div>
                </div>

                <!-- ... después del campo de contraseña y antes del botón Ingresar ... -->
                <div class="text-start mb-3">
                  <a href="#" class="text-dark" 
                     style="font-size: 14px; text-decoration: none;"
                     data-bs-toggle="modal" 
                     data-bs-target="#recoveryModal">
                     ¿Olvidaste tu contraseña? No te preocupes, pide un código verificador por <u>correo</u> o <u>SMS</u> para cambiar tu contraseña.
                  </a>
                </div>

                <button type="submit" class="btn rounded-pill w-100" 
                        style="background-color: #000; color: #fff; font-size: 14px;">
                  Ingresar
                </button>
                
                <div class="text-center mt-3">
                  <a href="#" class="text-dark" id="registerLinkFromLogin" 
                     style="font-size: 14px; text-decoration: none;">
                    ¿Aún no tienes cuenta? <u>Regístrate</u>
                  </a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      
      <!-- Modal de recuperación por correo -->
      <div class="modal fade" id="emailRecoveryModal" tabindex="-1" aria-labelledby="emailRecoveryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-body">
              <div class="container">
                <div class="row justify-content-center">
                  <div class="col-12">
                    <h4 class="text-label mb-3">Restablecer contraseña</h4>
                    <p class="text-muted mb-4">Ingresa tu correo electrónico y te enviaremos las instrucciones para una nueva contraseña.</p>
                    
                    <form id="emailRecoveryForm">
                      <div class="mb-3">
                        <label class="form-label">Correo electrónico</label>
                        <div class="position-relative">
                          <input type="email" 
                                 class="form-control border-0 border-bottom rounded-0"
                                 placeholder="Ingresa tu correo electrónico" 
                                 style="box-shadow: none; background: transparent;"
                                 required>
                        </div>
                      </div>

                      <button type="submit" 
                              class="btn rounded-pill w-100 mb-3" 
                              style="background-color: #000; color: #fff;">
                        Continuar
                      </button>
                      
                      <div class="text-center mt-3">
                        <a href="#" class="text-dark text-decoration-underline" data-bs-toggle="modal" data-bs-target="#loginModal">
                          Ya tengo el código verificador
                        </a>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


 <!-- Modal de recuperación por SMS -->
 <div class="modal fade" id="smsModal" tabindex="-1" aria-labelledby="smsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12">
              <h4 class="text-label mb-3">Restablecer contraseña</h4>
              <p class="text-muted mb-4">Ingresa tu correo electrónico y te enviaremos las instrucciones para una nueva contraseña..</p>
              
              <form id="emailRecoveryForm">
                <div class="mb-3">
                  <label class="form-label">Correo electrónico</label>
                  <div class="position-relative">
                    <input type="email" 
                           class="form-control border-0 border-bottom rounded-0"
                           placeholder="Ingresa tu correo electrónico" 
                           style="box-shadow: none; background: transparent;"
                           required>
                  </div>
                </div>

                <button type="submit" 
                        class="btn rounded-pill w-100 mb-3" 
                        style="background-color: #000; color: #fff;">
                  Continuar
                </button>
                
                <div class="text-center mt-3">
                  <a href="#" class="text-dark text-decoration-underline" data-bs-toggle="modal" data-bs-target="#loginModal">
                    Ya tengo el código verificador
                  </a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


      <!-- Modal de registro -->
      <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="registerModalLabel">
                <img src="{% static 'img/falIconButton.png' %}" alt="Falabella Icon" height="30">
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <!-- Columna del formulario -->
                <div class="col-md-7 border-end">
                  <h4 class="text-label mb-4">Prueba</h4>
                  <form id="registerForm">
                    {% csrf_token %}
                    <div class="mb-3">
                      <label for="registerName" class="form-label">Nombre completo</label>
                      <input type="text" class="form-control border-0 border-bottom rounded-0" id="registerName" 
                             placeholder="Ingresa tu nombre" style="box-shadow: none; background: transparent;" required>
                    </div>
                    <div class="mb-3">
                      <label for="registerEmail" class="form-label">Correo electrónico</label>
                      <input type="email" class="form-control border-0 border-bottom rounded-0" id="registerEmail" 
                             placeholder="nombre@ejemplo.com" style="box-shadow: none; background: transparent;" required>
                    </div>                       
                    
                    <div class="mb-3">
                      <label for="confirmPassword" class="form-label">Confirmar contraseña</label>
                      <div class="position-relative">
                        <input type="password" class="form-control border-0 border-bottom rounded-0" id="confirmPassword" 
                               placeholder="Ingresa una contraseña" style="box-shadow: none; background: transparent; text-align: left;" required>
                        <button type="button" class="btn position-absolute end-0 top-50 translate-middle-y" 
                                onclick="togglePassword('confirmPassword')" style="background: none; border: none;">
                          <i class="bi bi-eye-slash" id="togglePasswordConfirm"></i>
                        </button>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">
                          <div class="container p-0">
                            <div class="row g-2">
                              <!-- Columna 1 -->
                              <div class="col-4">
                                <div style="font-size: 10px; color: #000000; font-weight: bold;">• Mín. 8 caracteres</div>
                                <div style="font-size: 10px; color: #000000; font-weight: bold;">• 1 número</div>
                              </div>
                              <!-- Columna 2 -->
                              <div class="col-4">
                                <div style="font-size: 10px; color: #000000; font-weight: bold;">• 1 mayúscula</div>
                                <div style="font-size: 10px; color: #000000; font-weight: bold;">• 1 minúscula</div>
                              </div>
                              <!-- Columna 3 -->
                              <div class="col-4">
                                <div style="font-size: 10px; color: #000000; font-weight: bold;">• Sin espacio</div>
                                <div style="font-size: 10px; color: #000000; font-weight: bold;">• Sin usar '\¡¿"ºª·`´çñÑ</div>
                              </div>
                            </div>
                          </div>
                        </small>
                      </div>
                    </div>
                    <div class="mb-3">
                      <!-- Primero el texto de CMR Puntos -->
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="cmrPuntosCheck" required>
                        <label class="form-check-label" for="cmrPuntosCheck" style="font-size: 14px;">
                          Quiero acumular CMR Puntos en mis compras según <u>el reglamento del programa</u> y autorizo el<br>
                          <u>tratamiento de mis datos personales.</u>
                        </label>
                      </div>

                      <!-- Separador -->
                      <div style="margin-bottom: 20px;"></div>

                      <!-- Luego el texto de términos y condiciones -->
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="terminosCheck" required>
                        <label class="form-check-label" for="terminosCheck" style="font-size: 14px;">
                          Acepto los términos y condiciones de falabella.com y autorizo el tratamiento de mis datos personales.
                        </label>
                      </div>
                    </div>

                    <!-- El botón de crear cuenta sin color -->
                    <button type="submit" class="btn rounded-pill w-50 mx-auto d-block border-dark" 
                            style="font-size: 14px; padding: 8px 20px; background-color: transparent; color: #000;">
                      Registrate
                    </button>
                    
                  </form>
                </div>
                
                <!-- Columna de beneficios -->
                <div class="col-md-5">
                  <div class="benefits-section p-4">
                    <h5 class="mb-4">Beneficios de tu cuenta</h5>
                    < class="list-unstyled">
                      
                      <li class="mb-3">
                        <i class="bi bi-heart text-success me-2"></i>
                        Lista de favoritos
                      </li>
                      <li class="mb-3">
                        <i class="bi bi-truck text-success me-2"></i>
                        Seguimiento de pedidos
                      </li>
                      <li class="mb-3">
                        <i class="bi bi-tag text-success me-2"></i>
                        Ofertas exclusivas
                      </li>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Agregar el modal del reglamento -->
      <div class="modal fade" id="reglamentoModal" tabindex="-1" aria-labelledby="reglamentoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title w-100 text-center text-success" id="reglamentoModalLabel">
                REGLAMENTO DEL PROGRAMA DE FIDELIZACIÓN CMR PUNTOS
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
              <!-- Contenido del reglamento -->
              <p>1. Definiciones</p>
              <p>2. Objetivo del Programa</p>
              <p>3. Participantes</p>
              <p>4. Acumulación de Puntos</p>
              <p>5. Beneficios</p>
              <!-- Agregar más contenido para que aparezca la barra -->
            </div>
          </div>
        </div>
      </div>

      <!-- Agregar el modal para tratamiento de datos -->
      <div class="modal fade" id="tratamientoModal" tabindex="-1" aria-labelledby="tratamientoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title w-100 text-center text-success" id="tratamientoModalLabel">
                TRATAMIENTO DE DATOS PERSONALES
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
              <!-- Contenido del tratamiento de datos -->
              <p>1. Política de Privacidad</p>
              <p>2. Finalidad del Tratamiento</p>
              <p>3. Derechos del Titular</p>
              <p>4. Seguridad de los Datos</p>
              <p>5. Tiempo de Conservación</p>
            </div>
          </div>
        </div>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Verificar si el formulario estaba visible antes de recargar
          const formVisible = localStorage.getItem('registerFormVisible');
          if (formVisible === 'true') {
              document.getElementById('inlineRegisterForm').style.display = 'block';
          }

          // Cuando se abre el formulario
          document.querySelector('#registerLink').addEventListener('click', function() {
              document.getElementById('inlineRegisterForm').style.display = 'block';
              localStorage.setItem('registerFormVisible', 'true');
          });

          // Cuando se cierra el formulario
          function closeInlineRegister() {
              document.getElementById('inlineRegisterForm').style.display = 'none';
              localStorage.setItem('registerFormVisible', 'false');
          }
      });
    </script>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    // Verificar si el formulario estaba visible antes de recargar
    const formVisible = localStorage.getItem('registerFormVisible');
    if (formVisible === 'true') {
        document.getElementById('inlineRegisterForm').style.display = 'block';
    }

    // Cuando se abre el formulario desde cualquier enlace de registro
    const registerLinks = document.querySelectorAll('#registerLink, #registerLinkFromLogin');
    registerLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('inlineRegisterForm').style.display = 'block';
    });

    // Cuando se envía el formulario
    document.querySelector('#registerForm').addEventListener('submit', function(e) {
        e.preventDefault();
        // Solo eliminar el estado cuando el registro sea exitoso
        if (/* validación exitosa */) {
            localStorage.removeItem('registerFormVisible');
        }
    });

    // Cuando se cierra manualmente el formulario
    window.closeInlineRegister = function() {
        document.getElementById('inlineRegisterForm').style.display = 'none';
        localStorage.removeItem('registerFormVisible');
    };

    // Mantener el formulario visible incluso después de actualizar
    window.addEventListener('beforeunload', function() {
        const form = document.getElementById('inlineRegisterForm');
        if (form.style.display === 'block') {
            localStorage.setItem('registerFormVisible', 'true');
        }
    });
});
</script>

<script>
function showLoginForm() {
  // Ocultar el formulario de registro
  document.getElementById('inlineRegisterForm').style.display = 'none';
  localStorage.removeItem('registerFormVisible');
  
  // Mostrar el modal de login
  const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
  loginModal.show();
}
</script>

<script>
document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault();
    
    // Obtener los valores de los campos
    const formData = {
        email: document.querySelector('input[placeholder="Ingresa un correo"]').value,
        nombre: document.querySelector('input[placeholder="Ingresa un nombre"]').value,
        apellidos: document.querySelector('input[placeholder="Ingresa apellidos"]').value,
        documento: document.querySelector('input[placeholder="Ingresa una cedula"]').value,
        celular: document.querySelector('input[placeholder="Ingresa tu número celular"]').value,
        tipoDocumento: document.querySelector('#documentTypeDropdown span').textContent,
        aceptaCMR: document.querySelector('#cmrPuntosCheck').checked,
        aceptaTerminos: document.querySelector('#terminosCheck').checked
    };

    // Validar que todos los campos requeridos estén llenos
    if (!formData.email || !formData.nombre || !formData.apellidos || !formData.documento || !formData.celular) {
        alert('Por favor, complete todos los campos requeridos');
        return;
    }

    // Validar que los checkboxes estén marcados
    if (!formData.aceptaTerminos) {
        alert('Debe aceptar los términos y condiciones para continuar');
        return;
    }

    // Aquí harías la llamada al servidor para registrar al usuario
    fetch('/register/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value // Si usas CSRF token
        },
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Registro exitoso
            alert('¡Registro exitoso!');
            window.location.href = '/'; // Redireccionar a la página principal
        } else {
            // Mostrar error
            alert(data.message || 'Error en el registro');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error en el registro. Por favor, intente nuevamente.');
    });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Verificar si el formulario estaba visible antes de recargar
    const formVisible = sessionStorage.getItem('registerFormVisible');
    if (formVisible === 'true') {
        document.getElementById('inlineRegisterForm').style.display = 'block';
    }

    // Cuando se abre el formulario desde cualquier enlace de registro
    const registerLinks = document.querySelectorAll('#registerLink, #registerLinkFromLogin');
    registerLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('inlineRegisterForm').style.display = 'block';
            // Guardar el estado en sessionStorage
            sessionStorage.setItem('registerFormVisible', 'true');
        });
    });

    // Cuando se cierra manualmente el formulario
    window.closeInlineRegister = function() {
        document.getElementById('inlineRegisterForm').style.display = 'none';
        sessionStorage.removeItem('registerFormVisible');
    };

    // Guardar estado antes de recargar la página
    window.addEventListener('beforeunload', function() {
        const form = document.getElementById('inlineRegisterForm');
        if (form.style.display === 'block') {
            sessionStorage.setItem('registerFormVisible', 'true');
        }
    });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Agregar evento al enlace de correo en la recuperación de contraseña
    const emailRecoveryLink = document.querySelector('a[data-bs-toggle="modal"] u:first-child');
    if (emailRecoveryLink) {
        emailRecoveryLink.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Cerrar el modal de login si está abierto
            const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            if (loginModal) {
                loginModal.hide();
            }

            // Mostrar el modal de recuperación por correo
            const emailModal = new bootstrap.Modal(document.getElementById('emailRecoveryModal'));
            emailModal.show();
        });
    }
});
</script>

<script>
function showLoginForm() {
  // Ocultar el formulario de registro
  document.getElementById('inlineRegisterForm').style.display = 'none';
  localStorage.removeItem('registerFormVisible');
  
  // Mostrar el modal de login
  const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
  loginModal.show();
}
</script>

<script>
document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault();
    
    // Obtener los valores de los campos
    const formData = {
        email: document.querySelector('input[placeholder="Ingresa un correo"]').value,
        nombre: document.querySelector('input[placeholder="Ingresa un nombre"]').value,
        apellidos: document.querySelector('input[placeholder="Ingresa apellidos"]').value,
        documento: document.querySelector('input[placeholder="Ingresa una cedula"]').value,
        celular: document.querySelector('input[placeholder="Ingresa tu número celular"]').value,
        tipoDocumento: document.querySelector('#documentTypeDropdown span').textContent,
        aceptaCMR: document.querySelector('#cmrPuntosCheck').checked,
        aceptaTerminos: document.querySelector('#terminosCheck').checked
    };

    // Validar que todos los campos requeridos estén llenos
    if (!formData.email || !formData.nombre || !formData.apellidos || !formData.documento || !formData.celular) {
        alert('Por favor, complete todos los campos requeridos');
        return;
    }

    // Validar que los checkboxes estén marcados
    if (!formData.aceptaTerminos) {
        alert('Debe aceptar los términos y condiciones para continuar');
        return;
    }

    // Aquí harías la llamada al servidor para registrar al usuario
    fetch('/register/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value // Si usas CSRF token
        },
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Registro exitoso
            alert('¡Registro exitoso!');
            window.location.href = '/'; // Redireccionar a la página principal
        } else {
            // Mostrar error
            alert(data.message || 'Error en el registro');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error en el registro. Por favor, intente nuevamente.');
    });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Verificar si el formulario estaba visible antes de recargar
    const formVisible = sessionStorage.getItem('registerFormVisible');
    if (formVisible === 'true') {
        document.getElementById('inlineRegisterForm').style.display = 'block';
    }

    // Cuando se abre el formulario desde cualquier enlace de registro
    const registerLinks = document.querySelectorAll('#registerLink, #registerLinkFromLogin');
    registerLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('inlineRegisterForm').style.display = 'block';
            // Guardar el estado en sessionStorage
            sessionStorage.setItem('registerFormVisible', 'true');
        });
    });

    // Cuando se cierra manualmente el formulario
    window.closeInlineRegister = function() {
        document.getElementById('inlineRegisterForm').style.display = 'none';
        sessionStorage.removeItem('registerFormVisible');
    };

    // Guardar estado antes de recargar la página
    window.addEventListener('beforeunload', function() {
        const form = document.getElementById('inlineRegisterForm');
        if (form.style.display === 'block') {
            sessionStorage.setItem('registerFormVisible', 'true');
        }
    });
});
</script>

<script>
document.getElementById('emailRecoveryForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = this.querySelector('input[type="email"]').value;
    
    if (email && email.includes('@')) {
        // Aquí iría la lógica para enviar el código por correo
        alert('Se ha enviado un código de verificación a tu correo electrónico');
        
        // Cambiar el contenido del modal para ingresar el código
        const modalBody = this.closest('.modal-body');
        modalBody.innerHTML = `
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-12">
                        <h4 class="text-label mb-3">Verificación</h4>
                        <p class="text-muted mb-4">Ingresa el código de verificación enviado a tu correo</p>
                        
                        <form id="verificationForm">
                            <div class="mb-3">
                                <label class="form-label">Código de verificación</label>
                                <input type="text" 
                                       class="form-control border-0 border-bottom rounded-0"
                                       placeholder="Ingresa el código"
                                       style="box-shadow: none; background: transparent;"
                                       maxlength="6"
                                       required>
                            </div>

                            <button type="submit" 
                                    class="btn rounded-pill w-100 mb-3" 
                                    style="background-color: #000; color: #fff;">
                                Verificar
                            </button>
                            
                            <div class="text-center mt-3">
                                <a href="#" class="text-dark text-decoration-underline" id="resendCode">
                                    Reenviar código
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        `;
    } else {
        alert('Por favor, ingresa un correo electrónico válido');
    }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Agregar evento al enlace de SMS
    const smsRecoveryLink = document.querySelector('a[data-bs-toggle="modal"] u:last-child');
    if (smsRecoveryLink) {
        smsRecoveryLink.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Cerrar el modal de login si está abierto
            const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            if (loginModal) {
                loginModal.hide();
            }

            // Mostrar el modal de recuperación por SMS
            const smsModal = new bootstrap.Modal(document.getElementById('smsModal'));
            smsModal.show();
        });
    }

    // Manejar el envío del formulario SMS
    document.getElementById('smsRecoveryForm')?.addEventListener('submit', function(e) {
        e.preventDefault();
        const phone = this.querySelector('input[type="tel"]').value;
        
        if (phone && phone.length === 10) {
            // Aquí iría la lógica para enviar el código por SMS
            alert('Se ha enviado un código de verificación a tu celular');
            
            // Cambiar el contenido del modal para ingresar el código
            const modalBody = this.closest('.modal-body');
            modalBody.innerHTML = `
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-12">
                            <h4 class="text-label mb-3">Verificación</h4>
                            <p class="text-muted mb-4">Ingresa el código de verificación enviado a tu celular</p>
                            
                            <form id="verificationForm">
                                <div class="mb-3">
                                    <label class="form-label">Código de verificación</label>
                                    <input type="text" 
                                           class="form-control border-0 border-bottom rounded-0"
                                           placeholder="Ingresa el código"
                                           style="box-shadow: none; background: transparent;"
                                           maxlength="6"
                                           required>
                                </div>

                                <button type="submit" 
                                        class="btn rounded-pill w-100 mb-3" 
                                        style="background-color: #000; color: #fff;">
                                    Verificar
                                </button>
                                
                                <div class="text-center mt-3">
                                    <a href="#" class="text-dark text-decoration-underline" id="resendCode">
                                        Reenviar código
                                    </a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            `;
        } else {
            alert('Por favor, ingresa un número de celular válido (10 dígitos)');
        }
    });
});
</script>

  </body>

  </html>